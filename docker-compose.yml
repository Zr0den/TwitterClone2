services:
  apigateway:
    image: ${DOCKER_REGISTRY-}apigateway
    build:
      context: .
      dockerfile: ApiGateway/Dockerfile
    ports:
     - "8080:80"
  tweetservice:
    image: ${DOCKER_REGISTRY-}tweetservice
    build:
      context: .
      dockerfile: TweetService/Dockerfile
    ports:
    - "8081:80"
    depends_on:
     - apigateway
  userservice:
    image: ${DOCKER_REGISTRY-}userservice
    build:
      context: .
      dockerfile: UserService/Dockerfile
    ports:
    - "8082:80"
    depends_on:
     - apigateway
  searchservice:
    image: ${DOCKER_REGISTRY-}searchservice
    build:
      context: .
      dockerfile: SearchService/Dockerfile
    ports:
    - "8083:80"
    depends_on:
     - apigateway
  twitterapi:
    image: ${DOCKER_REGISTRY-}userapi
    build:
      context: .
      dockerfile: TwitterAPI/Dockerfile
    ports:
    - "8084:80"
    depends_on:
     - apigateway
  authservice:
    image: authservice
    build: 
      context: .
      dockerfile: AuthService/Dockerfile
    ports:
     - "8085:80"
  mssql:
     image: mcr.microsoft.com/mssql/server:2022-latest
     ports:
      - 1433:1433
     environment:
       MSSQL_SA_PASSWORD: "S3cr3tP4sSw0rd#123"
       ACCEPT_EULA: "Y"
     volumes:             
      - database-data:/var/opt/mssql

volumes:
 database-data:  
